# ä½œç”¨åŸŸ
ä½œç”¨åŸŸçš„å®šä¹‰ï¼šèƒ½å¤Ÿè®¿é—®åˆ°å˜é‡å’Œå‡½æ•°çš„åœ°æ–¹
JavaScriptä¸­å˜é‡çš„ä½œç”¨åŸŸç”±è¯æ³•ä½œç”¨åŸŸå†³å®š

## è¯æ³•ä½œç”¨åŸŸ
> ç»´åŸºç™¾ç§‘ï¼šé™æ€ä½œç”¨åŸŸåˆå«åšè¯æ³•ä½œç”¨åŸŸï¼Œé‡‡ç”¨è¯æ³•ä½œç”¨åŸŸçš„å˜é‡å«è¯æ³•å˜é‡ã€‚è¯æ³•å˜é‡æœ‰ä¸€ä¸ªåœ¨ç¼–è¯‘æ—¶é™æ€ç¡®å®šçš„ä½œç”¨åŸŸã€‚è¯æ³•å˜é‡çš„ä½œç”¨åŸŸå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–ä¸€æ®µä»£ç ï¼Œè¯¥å˜é‡åœ¨è¿™æ®µä»£ç åŒºåŸŸå†…å¯è§ï¼Œåœ¨è¿™æ®µåŒºåŸŸä»¥å¤–è¯¥å˜é‡ä¸å¯è§ã€‚è¯æ³•ä½œç”¨åŸŸé‡Œï¼Œå–å˜é‡çš„å€¼æ—¶ï¼Œä¼šæ£€æŸ¥å‡½æ•°**å®šä¹‰æ—¶çš„æ–‡æœ¬ç¯å¢ƒ**ï¼Œæ•æ‰å‡½æ•°å®šä¹‰æ—¶å¯¹è¯¥å˜é‡çš„ç»‘å®šã€‚


## æ‰§è¡Œä¸Šä¸‹æ–‡ä¸ä½œç”¨åŸŸ
æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡éƒ½æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼ŒVariable Environmentå°±æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„æœ¬åœ°å†…å­˜ç©ºé—´(local memory space)ã€‚

### å…¨å±€ä¸Šä¸‹æ–‡
å…¨å±€ä¸Šä¸‹æ–‡çš„Variable Environmentå«åšå…¨å±€ä½œç”¨åŸŸ(Global Scope)ã€‚JSå¼•æ“åœ¨åˆ›å»ºå…¨å±€ä¸Šä¸‹æ–‡çš„åŒæ—¶ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å¯¹è±¡(Global Object)å’Œthisï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œè¿™ä¸ªå…¨å±€å¯¹è±¡æ˜¯Windowå¯¹è±¡ï¼ŒthisæŒ‡å‘Windowã€‚

å­˜åœ¨äºJavaScriptå‡½æ•°ä¹‹å¤–çš„ä»»ä½•ä»£ç å­˜åœ¨äºå…¨å±€ä¸Šä¸‹æ–‡ä¸­
åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨varå£°æ˜çš„å˜é‡å’Œfunctionå…³é”®å­—å£°æ˜çš„å‡½æ•°éƒ½ä¼šè¢«é™„åŠ åˆ°å…¨å±€å¯¹è±¡Windowä¸Šé¢ã€‚

### å‡½æ•°ä¸Šä¸‹æ–‡
å‡½æ•°ä¸Šä¸‹æ–‡ä¹Ÿå«æœ¬åœ°ä¸Šä¸‹æ–‡(local context)ï¼Œæ‰€ä»¥å‡½æ•°ä¸Šä¸‹æ–‡çš„Variable Environmentå«åšæœ¬åœ°ä½œç”¨åŸŸ(Local Scope)ã€‚

## ä½œç”¨åŸŸé“¾(Scope Chain)
> the whole chain of this lexical environment is called the scope chain

ç”±è¯æ³•ä½œç”¨åŸŸçš„å®šä¹‰å¯çŸ¥ï¼šè¯æ³•ä½œç”¨åŸŸæ˜¯ç”±æˆ‘ä»¬åœ¨å†™ä»£ç æ—¶å°†å˜é‡å’Œå‡½æ•°å†™åœ¨å“ªé‡Œå†³å®šçš„ï¼Œè¯æ³•(lexical)é€šå¸¸ä¹Ÿæ„å‘³ç€å±‚æ¬¡ç»“æ„æˆ–é¡ºåºã€‚

è¯æ³•ç¯å¢ƒ(Lexical Environment)= æœ¬åœ°å†…å­˜ç©ºé—´(Variable Environment) + çˆ¶æ¯çš„è¯æ³•ç¯å¢ƒ(parent's lexical environment)

è¯æ³•ç¯å¢ƒé“¾æ¥èµ·æ¥å°±å¾—åˆ°äº†ä½œç”¨åŸŸé“¾ã€‚

ä¸¾ä¸ªğŸŒ°ï¼šå‡½æ•°cå†™åœ¨å‡½æ•°aå†…ï¼Œæ‰€ä»¥å‡½æ•°cçš„lexical parentå°±æ˜¯å‡½æ•°a
```javascript
var name = "lululu";
function a() {
    var b = 1;
    function c() {
        var d = 2;
        console.log(d);
        console.log(b);
        console.log(name);
    }
    c();
}
a();
```
å›¾ç‰‡è¯´æ˜ï¼š
- å‡½æ•°cèƒ½å¤Ÿè®¿é—®åˆ°dï¼Œå› ä¸ºdåœ¨å‡½æ•°cçš„Local Scopeä¸­
- å‡½æ•°cçš„lexical parentæ˜¯aï¼Œæ‰€ä»¥åœ¨cä¸­èƒ½å¤Ÿè®¿é—®åˆ°aä¸­çš„å˜é‡
- å‡½æ•°açš„lexical parentæ˜¯Global Scopeï¼Œæ‰€ä»¥cä¹Ÿèƒ½å¤Ÿè®¿é—®åˆ°Global Scopeä¸­çš„å˜é‡name
- cçš„ä½œç”¨åŸŸé“¾ = cçš„Local Scope + açš„Local Scope + Global Scope

![scope example](./../images/scope-1.png)


## å‚è€ƒ
- [Namaste JavaScript ğŸ™ Ep.4-Ep.5 + Ep.7](https://www.youtube.com/playlist?list=PLlasXeu85E9cQ32gLCvAvr9vNaUccPVNP)